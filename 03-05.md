**❤️03**

- 스프링부트의 계층: 프레젠테이션, 비즈니스, 퍼시스턴스 계층 → 각각 컨트롤러, 서비스, 리포지토리에 의해 실제로 구현됨
- 각 계층은 정해진 역할을 수행, 계층간 소통은 가능


**❤️04**

- JUnit: 자바 언어를 위한 단위 테스트 **프레임워크** (주로 메서드를 단위로)
    - BeforeAll, BeforeEach, AfterAll, AfterEach 등의 애너테이션 사용하면 여러 테스트 케이스를 생명주기를 갖고 실행할 수 있음
- AssertJ: JUnit과 함께 사용하는 **라이브러리** (테스트를 위한 코드 작성시 가독성 높은 코드를 작성할 수 있게 해줌)

```java
//Ex
Assertions.assertEquals(sum, a + b); // AssertJ 사용하지 않은 경우 
assertThat(a + b).isEqualTo(sum); // AssertJ 사용한 경우
```

**❤️05**

- DBMS
    - H2
        - 스프링부트의 인메모리 RDBMS
        - 애플리케이션 자체 내부에 데이터를 저장
        - 애플리케이션 실행시 마다 데이터 초기화
        - 테스트용도로 많이 사용 (실제 서비스에선 주로 MySQL)
- 테이블: 데이터베이스의 기본 단위
- 행: 가로, 레코드라고도 부름
- 열: 데이터 무결성 보장 (무결성: ex 나이 열에 문자가 들어갈 수 없음)
- 기본키: 식별자 역할, 중복 불가, null 불가능
- 쿼리: CRUD를 하기 위한 명령문, SQL(데이터베이스 전용 ‘언어’)을 사용하여 작성

- ORM: 자바 객체와 데이터베이스를 연결하는 프로그래밍 기법
    - SQL을 사용하지 않고도 자바 언어로 데이터베이스에 접근 가능
    - DBMS의 종류에 대한 종속성 줄어듦
    - 단점: 프로젝트 복잡성이 커질수록 어려워짐, 복잡하고 무거운 쿼리는 ORM으로 해결 불가
- ORM의 종류
    - JPA: 자바에서 RDBMS를 사용하는 방식을 정의한 **인터페이스**, 자바 객체와 데이터베이스를 연결 ****
    - **인터페이스** 사용을 위한 프레임워크(= ORM) 요구됨 → 대표적으로 하이버네이트
    - 하이버네이트: ORM의 일종이자, JPA 인터페이스를 구현한 구현체 (JDBC API 사용)
- JPA 관련 개념
    - 엔티티: 데이터베이스 테이블과 매핑되는 객체 (객체임엔 다름 없지만, 테이블과 직접 연결되는 특징을 가져서 구분지어 부름)
    - 엔티티 매니저: 엔티티를 관리 (필요한 시점에 데이터베이스에 연결, 쿼리)
    - 엔티티 매니저 팩토리: 엔티티 매니저를 만드는 곳 (스프링부트 내부에서 엔티티 매니저 팩토리는 하나 뿐)
        - 실제로는, 진짜 엔티티 매니저와 연결하는 프록시(가짜) 엔티티 매니저 사용, 필요시 진짜 엔티티 매니저 호출 (즉, 실제 엔티티 매니저는 스프링부트 JPA에서 관리)
    - 영속성 컨텍스트
        - 엔티티가 저장되는 곳, 엔티티를 관리하는 가상의 공간
        - 1차 캐시: 영속성 컨텍스트 내부에 존재, 1차 캐시에 값이 존재하면 거기서 반환
        - 쓰기 지연: 쿼리를 트랜잭션 커밋시까지 모았다가 한번에 실행
        - 변경 감지: 1차 캐시와 데이터베이스를 자동으로 비교하여 반영
        - 지연 로딩: 데이터가 필요할 때 쿼리를 날려서 데이터를 조회 (↔ 즉시 로딩)
        - → 데이터베이스 접근을 최소화하여 성능을 높이게 해주는 특징들
    - 엔티티의 상태
        - 비영속 상태: 영속성 컨텍스트와 전혀 관계가 없는, 엔티티 생성 직후 상태
        - 관리 상태: 영속성 컨텍스트에서 관리되는 상태
        - 분리 상태: 영속성 컨텍스트에서 관리하지 않는 상태
        - 삭제 상태: 영속성 컨텍스트와 데이터베이스에서 삭제된 상태
- 스프링 데이터 JPA: JPA를 쓰기 편하게 만들어놓은 모듈 (ex 스프링데이터 JPA, 스프링데이터 MongoDB)
    - 비지니스 로직에 더 집중할 수 있게, 데이터베이스 사용 기능을 클래스 레벨에서 추상화 (JPA의 편리한 사용을 위한 메서드 제공 → JpaRepository를 상속받아서 사용 가능)
